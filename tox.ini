[tox]
envlist = py27-unit,py36-integration

[testenv]
deps =
  coverage
  ../torba
  ../lbryschema
  unit: pylint
  integration: ../electrumx
  integration: ../orchstr8
  integration: ../lbryumx
extras = test
changedir = {toxinidir}/tests
setenv =
  HOME=/tmp
  PYTHONHASHSEED=0
  integration: LEDGER=lbrynet.wallet
commands =
  unit: pylint --rcfile=../.pylintrc ../lbrynet
  unit: coverage run -p --source={envsitepackagesdir}/lbrynet -m twisted.trial functional unit
  integration: orchstr8 download
  integration: coverage run -p --source={envsitepackagesdir}/lbrynet -m twisted.trial --reactor=asyncio integration.wallet.test_transactions.BasicTransactionTest
  integration: coverage run -p --source={envsitepackagesdir}/lbrynet -m twisted.trial --reactor=asyncio integration.wallet.test_commands.CommonWorkflowTests
